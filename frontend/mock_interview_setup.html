<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Mock Interview Setup â€” ASCEND</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #6366f1;
      --primary-hover: #4f46e5;
      --bg: #f8fafc;
      --card-bg: #ffffff;
      --text-main: #1e293b;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --sidebar-bg: #0f1724;
      --menu-text: #cbd5e1;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background-color: var(--bg);
      color: var(--text-main);
      display: flex;
      min-height: 100vh;
    }

    /* SIDEBAR (Consistent with existing app) */
    .sidebar {
      width: 300px;
      background: var(--sidebar-bg);
      color: white;
      padding: 26px;
      display: flex;
      flex-direction: column;
      align-items: center;
      flex-shrink: 0;
    }

    .brand-logo {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: #0b1220;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
    }

    .brand-logo img {
      width: 80px;
    }

    .sidebar-title {
      color: #a5b4fc;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .user-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 24px;
    }

    .user-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .menu {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .menu button {
      padding: 12px;
      border: none;
      background: transparent;
      color: var(--menu-text);
      font-weight: 600;
      text-align: left;
      cursor: pointer;
      border-radius: 8px;
      width: 100%;
      font-family: inherit;
    }

    .menu button.active {
      background: linear-gradient(90deg, var(--primary), var(--primary-hover));
      color: white;
    }

    /* MAIN CONTENT */
    .main {
      flex: 1;
      padding: 60px 40px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    .container {
      width: 100%;
      max-width: 640px;
    }

    header {
      margin-bottom: 32px;
    }

    h1 {
      font-size: 28px;
      font-weight: 700;
      color: #0f172a;
      margin-bottom: 8px;
    }

    .subtitle {
      color: var(--text-muted);
      font-size: 16px;
    }

    .setup-card {
      background-color: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-group:last-of-type {
      margin-bottom: 32px;
    }

    label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #334155;
      margin-bottom: 8px;
    }

    select {
      width: 100%;
      padding: 12px 16px;
      font-size: 15px;
      font-family: inherit;
      color: var(--text-main);
      background-color: #fcfdfe;
      border: 1px solid var(--border);
      border-radius: 10px;
      outline: none;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      background-size: 16px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .start-btn {
      width: 100%;
      padding: 14px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.1s;
    }

    .start-btn:hover {
      background-color: var(--primary-hover);
    }

    .start-btn:active {
      transform: scale(0.99);
    }

    /* RESPONSIVE */
    @media (max-width: 1024px) {
      .sidebar {
        width: 260px;
      }
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        padding: 20px;
      }

      .main {
        padding: 40px 20px;
      }
    }
  </style>
</head>

<body>
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand-logo"><img src="assets/logo.png" alt="Logo"></div>
    <div class="sidebar-title">Career Companion</div>

    <div class="user-row">
      <div class="user-icon">ðŸ‘¤</div>
      <strong class="user-greeting">Hi, <span class="user-name-display">Student</span></strong>
    </div>

    <nav class="menu">
      <button onclick="location.href='resume_upload.html'">Resume Upload</button>
      <button onclick="location.href='technical_test_setup.html'">Technical Test</button>
      <button onclick="location.href='communication_test.html'">Communication Test</button>
      <button class="active">Mock Interview</button>
      <button onclick="location.href='opportunities.html'">Opportunities</button>
      <button onclick="location.href='roadmap_setup.html'">Roadmap</button>
      <button onclick="location.href='dashboard.html'">Dashboard</button>
    </nav>

    <div style="margin-top: auto; width: 100%;">
      <button onclick="location.href='index.html'"
        style="background: none; color: #EF4444; width:100%; text-align:left; padding:12px; border:none; font-weight:600; font-size:14px; cursor:pointer; font-family:inherit;">Logout</button>
      <div style="padding-left:12px; font-size: 12px; color: #9aa7c7;">Signed in</div>
    </div>
  </aside>

  <main class="main">
    <div class="container">
      <header>
        <h1>AI Mock Interview Setup</h1>
        <p class="subtitle">Personalize your interview experience to match your target role.</p>
      </header>

      <div class="setup-card">
        <!-- 1. Interview Type (Primary Control) -->
        <div class="form-group">
          <label for="type">Interview Type</label>
          <select id="type" onchange="toggleFormFlow()">
            <option value="TECHNICAL">Technical Interview</option>
            <option value="HR">HR Interview</option>
          </select>
        </div>

        <!-- 2. Target Role (Conditional) -->
        <div class="form-group" id="roleGroup">
          <label for="role">Target Role</label>
          <select id="role">
            <option value="Frontend Developer">Frontend Developer</option>
            <option value="Backend Developer">Backend Developer</option>
            <option value="Full Stack Developer">Full Stack Developer</option>
            <option value="Data Analyst">Data Analyst</option>
          </select>
        </div>

        <!-- 3. Experience Level -->
        <div class="form-group">
          <label for="experience">Experience Level</label>
          <select id="experience">
            <option value="fresher">Fresher</option>
            <option value="1-3">1 â€“ 3 Years</option>
            <option value="3+">3+ Years</option>
          </select>
        </div>

        <!-- 4. Difficulty Level -->
        <div class="form-group">
          <label for="difficulty">Difficulty Level</label>
          <select id="difficulty">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
          </select>
        </div>

        <!-- 5. Duration -->
        <div class="form-group">
          <label for="duration">Duration</label>
          <select id="duration">
            <option value="10">10 Minutes</option>
            <option value="20">20 Minutes</option>
            <option value="30">30 Minutes</option>
          </select>
        </div>

        <button class="start-btn" onclick="startInterview()">Start Interview</button>
      </div>
    </div>
  </main>

  <script src="js/userContext.js"></script>
  <script>
    // Set username from local storage
    document.addEventListener('DOMContentLoaded', () => {
      // User identity handled by userContext.js

      // Initialize form flow
      toggleFormFlow();
    });

    function toggleFormFlow() {
      const type = document.getElementById('type').value;
      const roleGroup = document.getElementById('roleGroup');
      const roleSelect = document.getElementById('role');

      if (type === 'HR') {
        roleGroup.style.display = 'none';
        roleSelect.value = ''; // Clear stale value as per constraint
      } else {
        roleGroup.style.display = 'block';
        // Auto-select first option if empty
        if (!roleSelect.value && roleSelect.options.length > 0) {
          roleSelect.selectedIndex = 0;
        }
      }
    }

    function startInterview() {
      const type = document.getElementById('type').value;
      const role = document.getElementById('role').value;

      // Validation logic adapt to visibility state
      if (type === 'TECHNICAL' && !role) {
        alert('Please select a Target Role for the Technical Interview.');
        return;
      }

      const config = {
        role: type === 'HR' ? 'General' : role, // Use 'General' as fallback for backend consistency
        experience: document.getElementById('experience').value,
        type: type,
        difficulty: document.getElementById('difficulty').value,
        duration: document.getElementById('duration').value
      };

      localStorage.setItem('interview_config', JSON.stringify(config));
      window.location.href = 'mock_interview_session.html';
    }
  </script>
</body>

</html>